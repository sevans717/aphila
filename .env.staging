# ===========================================
# STAGING ENVIRONMENT CONFIGURATION
# ===========================================
# Pre-production testing environment for aphila.io
# Mirrors production but with test data and relaxed security

# ===========================================
# SERVER CONFIGURATION
# ===========================================
NODE_ENV=staging
PORT=4001
APP_URL=https://staging.aphila.io
FRONTEND_URL=https://staging.aphila.io

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# Staging database with PgBouncer connection pooling
DATABASE_URL=postgresql://sav3_staging_user:postgres@pgbouncer:6432/sav3_staging

# Database credentials for migrations and utilities
POSTGRES_USER=sav3_staging_user
POSTGRES_PASSWORD=postgres
POSTGRES_DB=sav3_staging

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================
# Staging JWT secrets (different from production)
JWT_SECRET=staging_jwt_secret_82d5b2d241655ebb6884b3ea241373d7e4e6bb4f8159d208f89f7ae76fedf45fe0d5a8940fc2f4f447e095272282cc16
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=staging_refresh_secret_3390b46edc24a4ccaf0a642ef961cb34c4a1296dfee486a9f72d7dad0cda2680d355167cdfa8bf97aeeea2279bb170e5985e1f211ecf00a7eb59419a55fa307e
JWT_REFRESH_EXPIRES_IN=7d
JWT_ACCESS_SECRET=staging_access_secret_7c693bdc1fcebcd43fdc56eb955b33c7f71f1ee90bb17f6aa0da8e49b846648a36a70e05a5f0a50c0f181d7ebf666bc9

# Encryption key for sensitive data (32 characters)
ENCRYPTION_KEY=staging_encryption_key_3126253a61c53bf37a0eb136a787860c89a22216744029853a2c7f0679c1ee27

# ===========================================
# RATE LIMITING & SECURITY
# ===========================================
# Moderate rate limiting for staging
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100

# CORS - Allow staging domain
CORS_ORIGINS=https://staging.aphila.io

# ===========================================
# REDIS CONFIGURATION
# ===========================================
REDIS_URL=redis://redis:6379
RATE_LIMIT_REDIS_URL=redis://redis:6379

# ===========================================
# MINIO STORAGE (Self-Hosted S3-Compatible)
# ===========================================
# Staging MinIO configuration
MINIO_ENDPOINT=minio.staging.aphila.io
MINIO_PORT=9000
MINIO_ACCESS_KEY=staging_media_access_key
MINIO_SECRET_KEY=staging_media_secret_key123
MINIO_BUCKET_NAME=sav3-media-staging
MINIO_USE_SSL=true

# MinIO Root Credentials (for admin access)
MINIO_ROOT_USER=minio_admin_staging
MINIO_ROOT_PASSWORD=minio_admin_staging_password123

# ===========================================
# MEDIA CONFIGURATION
# ===========================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,video/mp4
UPLOAD_DIR=./uploads
MEDIA_PROXY_URL=https://staging.aphila.io

# ===========================================
# PUSH NOTIFICATIONS (VAPID for Web Push)
# ===========================================
# Staging VAPID keys for web push notifications
VAPID_PUBLIC_KEY=staging_vapid_public_BLcRdreALRFXTkOOUHK1EtK2wtaz5Ry4YfYCA_0QTpQtUbVlUls0VJXg7SroGWg2dgsK8h1w3k7z1w2k4h5m6n7o8p9q0
VAPID_PRIVATE_KEY=staging_vapid_private_s9t8u7v6w5x4y3z2a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2g3h4i5j6k7l8m9n0

# ===========================================
# EMAIL CONFIGURATION (SMTP)
# ===========================================
SMTP_HOST=smtp.staging.aphila.io
SMTP_PORT=587
SMTP_USER=noreply@staging.aphila.io
SMTP_PASSWORD=staging_smtp_password_2024_secure
EMAIL_FROM=noreply@staging.aphila.io

# ===========================================
# FEATURE FLAGS
# ===========================================
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_GEOSPATIAL=true
ENABLE_ANALYTICS=true
DISABLE_PAYMENTS=true

# ===========================================
# LOGGING & MONITORING
# ===========================================
LOG_LEVEL=debug

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
BCRYPT_ROUNDS=10
SECURITY_HELMET_ENABLED=true
HSTS_MAX_AGE=86400

# ===========================================
# BACKUP CONFIGURATION
# ===========================================
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE="0 2 * * *"

# ===========================================
# PRODUCTION OPTIMIZATION
# ===========================================
# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# Cache settings
CACHE_TTL=1800
CACHE_MAX_SIZE=2000

# ===========================================
# COMPLIANCE & LEGAL
# ===========================================
DATA_RETENTION_DAYS=90
USER_DATA_EXPORT_ENABLED=true
RIGHT_TO_BE_FORGOTTEN_ENABLED=true

# ===========================================
# DEPLOYMENT CONFIGURATION
# ===========================================
COMPOSE_PROJECT_NAME=sav3-staging
USE_PGBOUNCER=true

# ===========================================
# HEALTH CHECKS
# ===========================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/api/v1/health</content>
<parameter name="filePath">c:\Users\evans\Desktop\sav3-backend\.env.staging
