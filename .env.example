# === SAV3 Backend Environment Configuration ===

# === Server Configuration ===
NODE_ENV=development
PORT=3001
APP_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000

# === Database Configuration ===
# For local development (direct Postgres):
# DATABASE_URL="postgresql://username:password@localhost:5432/sav3_db?schema=public"
#
# Production (recommended): use PgBouncer for connection pooling with Prisma.
# Point `DATABASE_URL` at the PgBouncer service (default port 6432) instead of
# connecting directly to Postgres. Examples:
# - When running in Docker Compose (api container -> pgbouncer service):
#   DATABASE_URL="postgresql://postgres:postgres@pgbouncer:6432/sav3?schema=public"
# - When running outside Docker but on same host as PgBouncer (localhost):
#   DATABASE_URL="postgresql://postgres:postgres@localhost:6432/sav3?schema=public"
#
# Alternative format: postgresql://user:password@host:port/database

# === JWT Authentication ===
JWT_SECRET=your-super-secret-jwt-key-here-at-least-32-characters-long
JWT_REFRESH_SECRET=your-super-secret-refresh-key-here-at-least-32-characters-long
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# === Firebase Configuration (for Push Notifications) ===
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY_ID=your-firebase-private-key-id
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project.iam.gserviceaccount.com
FIREBASE_CLIENT_ID=your-firebase-client-id
FIREBASE_AUTH_URI=https://accounts.google.com/o/oauth2/auth
FIREBASE_TOKEN_URI=https://oauth2.googleapis.com/token
FIREBASE_AUTH_PROVIDER_X509_CERT_URL=https://www.googleapis.com/oauth2/v1/certs
FIREBASE_CLIENT_X509_CERT_URL=https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-xxxxx%40your-project.iam.gserviceaccount.com

# === AWS Configuration (for S3 File Storage) ===
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=us-east-1
S3_BUCKET_NAME=your-s3-bucket-name

# === Redis Configuration (for Caching & Sessions) ===
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# === Email Configuration (SMTP) ===
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
FROM_EMAIL=noreply@sav3.app
FROM_NAME=SAV3 App

# === Feature Flags ===
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_GEOSPATIAL=true
ENABLE_ANALYTICS=true

# === File Upload Configuration ===
MAX_FILE_SIZE=10485760
# 10MB in bytes (10 * 1024 * 1024)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,video/mp4,video/mov,video/avi

# === Rate Limiting ===
RATE_LIMIT_WINDOW_MS=900000
# 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100

# === CORS Configuration ===
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
# Comma-separated list of allowed origins

# === Logging Configuration ===
LOG_LEVEL=info
# Options: error, warn, info, http, verbose, debug, silly

# === Socket.IO Configuration ===
SOCKET_IO_ORIGINS=http://localhost:3000 http://localhost:3001
SOCKET_IO_TRANSPORT=websocket,polling

# === Geospatial Configuration ===
DEFAULT_SEARCH_RADIUS=25
# Default search radius in kilometers
MAX_SEARCH_RADIUS=100
# Maximum allowed search radius in kilometers

# === Push Notification Configuration ===
FCM_SERVER_KEY=your-fcm-server-key
FCM_SENDER_ID=your-fcm-sender-id

# === Analytics Configuration ===
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL=5000
# Flush interval in milliseconds

# === Security Configuration ===
BCRYPT_ROUNDS=12
HELMET_ENABLED=true
COMPRESSION_ENABLED=true

# === Development/Debug Configuration ===
DEBUG_ENABLED=false
MOCK_SERVICES=false
SKIP_EMAIL_VERIFICATION=false

# === API Documentation ===
SWAGGER_ENABLED=true
API_DOCS_PATH=/api-docs

# === WebSocket Configuration ===
WS_HEARTBEAT_INTERVAL=30000
# WebSocket heartbeat interval in milliseconds
WS_HEARTBEAT_TIMEOUT=60000
# WebSocket heartbeat timeout in milliseconds

# === Session Configuration ===
SESSION_SECRET=your-session-secret-key-here
SESSION_MAX_AGE=86400000
# Session max age in milliseconds (24 hours)

# === Content Moderation ===
ENABLE_CONTENT_MODERATION=true
PROFANITY_FILTER_ENABLED=true

# === App Configuration ===
APP_NAME=SAV3
APP_VERSION=1.0.0
SUPPORT_EMAIL=support@sav3.app

# === Third-party Integrations ===
# Add any additional third-party service configurations here
# Example:
# STRIPE_PUBLIC_KEY=pk_test_...
# STRIPE_SECRET_KEY=sk_test_...
# GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# === Health Check Configuration ===
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/api/v1/health

# === Media Processing ===
IMAGE_RESIZE_ENABLED=true
IMAGE_QUALITY=80
# JPEG quality (1-100)
THUMBNAIL_SIZE=300
# Thumbnail size in pixels

# === Backup Configuration ===
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
# Cron expression for daily backup at 2 AM

# === Monitoring & Metrics ===
METRICS_ENABLED=true
PROMETHEUS_ENABLED=false
SENTRY_DSN=your-sentry-dsn-here

# === Testing Configuration ===
TEST_DATABASE_URL="postgresql://username:password@localhost:5432/sav3_test_db"
TEST_JWT_SECRET=test-jwt-secret-key
TEST_REDIS_URL=redis://localhost:6379/1

# === Production Overrides ===
# Uncomment and modify these for production deployment
# NODE_ENV=production
# PORT=80
# LOG_LEVEL=error
# DEBUG_ENABLED=false
# SWAGGER_ENABLED=false
